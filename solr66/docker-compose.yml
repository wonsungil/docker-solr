version: '3'
services: 
  solr: 
    image: solr:6.6
    ports: 
      - "8983:8983"
    volumes: 
      - type: bind
        source: /opt/docker-solr-start/solr66/config/data
        target: /var/solr

      - type: bind
        source: /opt/docker-solr-start/solr66/config/conf
        target: /opt/solr/server/solr/configsets/myconfig

      - type: bind
        source: /opt/docker-solr-start/solr66/config/dic
        target: /opt/solr/server/resources/dic

      - type: bind
        source: /opt/docker-solr-start/solr66/config/lib
        target: /opt/solr/server/solr-webapp/webapp/WEB-INF/lib
    entrypoint:
      - solr-precreate
      - collection1
      - /opt/solr/server/solr/configsets/myconfig

volumes:
  data:
  config:
  dic:
  lib:
